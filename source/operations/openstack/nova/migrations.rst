==========
Migrations
==========

Live migrate all instances of node
==================================

* https://docs.openstack.org/nova/pike/admin/live-migration-usage.html

.. code-block:: console

   $ nova host-evacuate-live --target-host 50-10 50-12
   +--------------------------------------+-------------------------+---------------+
   | Server UUID                          | Live Migration Accepted | Error Message |
   +--------------------------------------+-------------------------+---------------+
   | 380ea526-42d7-44ac-af2c-4d610a49c0d3 | True                    |               |
   | 5f0cd05b-a8cd-4abb-b3c8-f2b6d3fac015 | True                    |               |
   | 6f9d7757-50b7-465b-adce-937ead12d7b3 | True                    |               |
   | 719dee42-1bfa-4f25-a3b4-351b7f0fc0c8 | True                    |               |
   +--------------------------------------+-------------------------+---------------+

.. code-block:: console

   $ nova migration-list --host 50-12
   +-----+-------------+-----------+----------------+--------------+-----------+-----------+--------------------------------------+------------+------------+----------------------------+----------------------------+----------------+
   | Id  | Source Node | Dest Node | Source Compute | Dest Compute | Dest Host | Status    | Instance UUID                        | Old Flavor | New Flavor | Created At                 | Updated At                 | Type           |
   +-----+-------------+-----------+----------------+--------------+-----------+-----------+--------------------------------------+------------+------------+----------------------------+----------------------------+----------------+
   [...]
   | 238 | -           | -         | 50-12          | 50-10        | -         | queued    | 380ea526-42d7-44ac-af2c-4d610a49c0d3 | 84         | 84         | 2018-05-23T09:56:05.000000 | 2018-05-23T09:56:08.000000 | live-migration |
   | 241 | -           | -         | 50-12          | 50-10        | -         | preparing | 5f0cd05b-a8cd-4abb-b3c8-f2b6d3fac015 | 84         | 84         | 2018-05-23T09:56:05.000000 | 2018-05-23T09:56:07.000000 | live-migration |
   | 244 | -           | -         | 50-12          | 50-10        | -         | queued    | 6f9d7757-50b7-465b-adce-937ead12d7b3 | 84         | 84         | 2018-05-23T09:56:06.000000 | 2018-05-23T09:56:07.000000 | live-migration |
   | 247 | -           | -         | 50-12          | 50-10        | -         | queued    | 719dee42-1bfa-4f25-a3b4-351b7f0fc0c8 | 84         | 84         | 2018-05-23T09:56:06.000000 | 2018-05-23T09:56:08.000000 | live-migration |
   +-----+-------------+-----------+----------------+--------------+-----------+-----------+--------------------------------------+------------+------------+----------------------------+----------------------------+----------------+

.. note::

   Use ``nova server-migration-list INSTANCE_UUID`` to check a specific migration.
